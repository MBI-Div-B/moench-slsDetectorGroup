
# find_package (Python COMPONENTS Interpreter Development)

pybind11_add_module(_sls_detector 
    src/main.cpp 
    src/enums.cpp
    src/detector.cpp
    src/network.cpp
)

target_link_libraries(_sls_detector PUBLIC 
                        slsDetectorShared
                        slsReceiverShared
                        slsSupportLib
                        )  



set_target_properties(_sls_detector PROPERTIES
                        LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin
                    )

#Copy Python code 
set( PYTHON_FILES
    __init__.py
    adcs.py
    dacs.py
    decorators.py
    detector_property.py
    detector.py
    eiger.py
    errors.py
    ctb.py
    jungfrau.py
    mythen3.py
    registers.py
    lookup.py
    utils.py

)

foreach(FILE ${PYTHON_FILES})
    configure_file( sls_detector/${FILE}  
    ${CMAKE_BINARY_DIR}/bin/sls_detector/${FILE}  )

endforeach(FILE ${PYTHON_FILES})


configure_file( scripts/basic.py  
    ${CMAKE_BINARY_DIR}/basic.py 
)
configure_file( scripts/test_virtual.py  
    ${CMAKE_BINARY_DIR}/test_virtual.py 
)