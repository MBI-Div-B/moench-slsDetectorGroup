<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>slsDetector/slsDetector.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>slsDetector/slsDetector.h</h1><a href="slsDetector_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 
<a name="l00004"></a>00004 <span class="preprocessor">#ifndef SLS_DETECTOR_H</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor">#define SLS_DETECTOR_H</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span>
<a name="l00007"></a>00007 <span class="preprocessor">#include "<a class="code" href="MySocketTCP_8h.html">MySocketTCP.h</a>"</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;fstream&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;iomanip&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;cstring&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor"> #include &lt;queue&gt;</span>
<a name="l00015"></a>00015 <span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
<a name="l00016"></a>00016 <span class="preprocessor"> #include &lt;pthread.h&gt;</span>
<a name="l00017"></a>00017 }
<a name="l00018"></a>00018 <span class="preprocessor"> #include &lt;fcntl.h&gt;</span>
<a name="l00019"></a>00019 <span class="preprocessor"> #include &lt;unistd.h&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor"> #include &lt;sys/stat.h&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor"> #include &lt;sys/types.h&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor"> #include &lt;sys/uio.h&gt;</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="preprocessor">#include "<a class="code" href="sls__detector__defs_8h.html">sls_detector_defs.h</a>"</span>
<a name="l00026"></a>00026 
<a name="l00027"></a><a class="code" href="slsDetector_8h.html#79fd3eac646964332ed33ec7dd40f208">00027</a> <span class="preprocessor">#define MAX_TIMERS 10</span>
<a name="l00028"></a><a class="code" href="slsDetector_8h.html#4c84515c2af98fbe570b5201a1022103">00028</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_ROIS 100</span>
<a name="l00029"></a><a class="code" href="slsDetector_8h.html#458ac030ac964822b06ae7659da870df">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_BADCHANS 2000</span>
<a name="l00030"></a><a class="code" href="slsDetector_8h.html#361088f7869d8e7c123b003e817915a5">00030</a> <span class="preprocessor"></span><span class="preprocessor">#define MAXPOS 50</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00032"></a><a class="code" href="slsDetector_8h.html#21b1e82005e7fb5d8c0539e47ae25b01">00032</a> <span class="preprocessor">#define NMODMAXX 24</span>
<a name="l00033"></a><a class="code" href="slsDetector_8h.html#4454335271010cc7a932117cbf3f1be1">00033</a> <span class="preprocessor"></span><span class="preprocessor">#define NMODMAXY 24</span>
<a name="l00034"></a><a class="code" href="slsDetector_8h.html#86d84e5a6918e1cb1e2ecb75752e604a">00034</a> <span class="preprocessor"></span><span class="preprocessor">#define MAXMODS 36</span>
<a name="l00035"></a><a class="code" href="slsDetector_8h.html#13d24767ba1933e7367908de888f831a">00035</a> <span class="preprocessor"></span><span class="preprocessor">#define NCHIPSMAX 10</span>
<a name="l00036"></a><a class="code" href="slsDetector_8h.html#1796142de2f82d4c3e10632bddde99f7">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define NCHANSMAX 65536</span>
<a name="l00037"></a><a class="code" href="slsDetector_8h.html#4460877d434c3a8731bb4beb20a2e256">00037</a> <span class="preprocessor"></span><span class="preprocessor">#define NDACSMAX 16</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span>
<a name="l00039"></a><a class="code" href="slsDetector_8h.html#cbd0b3def6b58577376d5c5edbc1f8d1">00039</a> <span class="preprocessor">#define DEFAULT_HOSTNAME  "localhost"</span>
<a name="l00040"></a><a class="code" href="slsDetector_8h.html#c5cee1b5d2ab5671b3ec6e9ca2bf9fad">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define DEFAULT_SHM_KEY  5678</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00042"></a><a class="code" href="slsDetector_8h.html#082faba3de8ce8379e160e3067333d14">00042</a> <span class="preprocessor">#define defaultTDead {170,90,750} </span>
<a name="l00049"></a><a class="code" href="classdetectorData.html">00049</a> <span class="preprocessor">class detectorData {</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span> <span class="keyword">public</span>:
<a name="l00059"></a><a class="code" href="classdetectorData.html#b8f9763c0f1280e00c5d5305b9f7551f">00059</a>   <a class="code" href="classdetectorData.html">detectorData</a>(<span class="keywordtype">float</span> *val=NULL, <span class="keywordtype">float</span> *err=NULL, <span class="keywordtype">float</span> *ang=NULL,  <span class="keywordtype">int</span> f_ind=-1, <span class="keywordtype">char</span> *fname=<span class="stringliteral">""</span>, <span class="keywordtype">int</span> np=-1) : values(val), errors(err), angles(ang),  fileIndex(f_ind), npoints(np){strcpy(fileName,fname);};
<a name="l00064"></a><a class="code" href="classdetectorData.html#d32a037cc2bd6e8caf4556cbd4b88ec7">00064</a>     ~<a class="code" href="classdetectorData.html">detectorData</a>() {<span class="keywordflow">if</span> (values) <span class="keyword">delete</span> [] values; <span class="keywordflow">if</span> (errors) <span class="keyword">delete</span> [] errors; <span class="keywordflow">if</span> (angles) <span class="keyword">delete</span> [] angles;};
<a name="l00065"></a>00065     <span class="comment">//private:</span>
<a name="l00066"></a>00066     <span class="keywordtype">float</span> *values; 
<a name="l00067"></a><a class="code" href="classdetectorData.html#e4191aeee86e87a78a9cfd72584eab29">00067</a>   <span class="keywordtype">float</span> *errors; 
<a name="l00068"></a><a class="code" href="classdetectorData.html#ec90e5b0c82e16183422341568ec3c9a">00068</a>   <span class="keywordtype">float</span> *angles;
<a name="l00069"></a><a class="code" href="classdetectorData.html#4b8849fdd6d2163a5f5c16f7c9b64ef1">00069</a>   <span class="keywordtype">int</span> fileIndex;
<a name="l00070"></a><a class="code" href="classdetectorData.html#91d1e3466878def295a531c01bdeef6b">00070</a>   <span class="keywordtype">char</span> fileName[1000];
<a name="l00071"></a><a class="code" href="classdetectorData.html#50aabf6f2c40587f8e915cf4913a2cfe">00071</a>   <span class="keywordtype">int</span> npoints;
<a name="l00072"></a>00072 };
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="keyword">using namespace </span>std;
<a name="l00123"></a><a class="code" href="classslsDetector.html">00123</a> <span class="keyword">class </span><a class="code" href="classslsDetector.html">slsDetector</a> {
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 
<a name="l00127"></a>00127  <span class="keyword">public</span>:
<a name="l00128"></a>00128   
<a name="l00129"></a>00129 
<a name="l00131"></a>00131   <span class="keyword">enum</span> {<a class="code" href="classslsDetector.html#ac085f1939dcfed328dc6ff4b11fdb44617c55ac8cf00235b76c1c1481238abb">GET_ONLINE_FLAG</a>, 
<a name="l00132"></a>00132         <a class="code" href="classslsDetector.html#ac085f1939dcfed328dc6ff4b11fdb44da0a4f5b33e634292bc99256a9552f2f">OFFLINE_FLAG</a>, 
<a name="l00133"></a><a class="code" href="classslsDetector.html#ac085f1939dcfed328dc6ff4b11fdb44d3b612a2eb0d1029bd260b502afcf632">00133</a>         <a class="code" href="classslsDetector.html#ac085f1939dcfed328dc6ff4b11fdb44d3b612a2eb0d1029bd260b502afcf632">ONLINE_FLAG</a> 
<a name="l00134"></a>00134   };
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 
<a name="l00142"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html">00142</a> <span class="keyword">typedef</span>  <span class="keyword">struct </span><a class="code" href="structslsDetector_1_1sharedSlsDetector.html">sharedSlsDetector</a> {
<a name="l00144"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#ee2e81699a79e6b9ddc698d120a13ef9">00144</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#ee2e81699a79e6b9ddc698d120a13ef9">alreadyExisting</a>;
<a name="l00145"></a>00145     
<a name="l00147"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#bf7e3c0dca0810fbd1522e5885d9fe7a">00147</a>     <span class="keywordtype">char</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#bf7e3c0dca0810fbd1522e5885d9fe7a">hostname</a>[<a class="code" href="sls__detector__defs_8h.html#aa695591372841e2c5580e4ed0f3620f">MAX_STR_LENGTH</a>];
<a name="l00149"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#11da9fd02e0833533a8b2de6ad3307d8">00149</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#11da9fd02e0833533a8b2de6ad3307d8">controlPort</a>;
<a name="l00151"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#fc7fef330e7b7ce0cd7470572a5f27b0">00151</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#fc7fef330e7b7ce0cd7470572a5f27b0">stopPort</a>;
<a name="l00153"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#108090dc9c97fe4d9f91357c27d56953">00153</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#108090dc9c97fe4d9f91357c27d56953">dataPort</a>;
<a name="l00154"></a>00154 
<a name="l00156"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5fcd4804cb224f455da374b25fe5f08a">00156</a>     <a class="code" href="sls__detector__defs_8h.html#ab9f984f7b6798e684c8f3e6b63c6301">detectorType</a> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5fcd4804cb224f455da374b25fe5f08a">myDetectorType</a>;
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 
<a name="l00160"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#4a4421330a2c207e5da36e3739305915">00160</a>     <span class="keywordtype">char</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#4a4421330a2c207e5da36e3739305915">trimDir</a>[<a class="code" href="sls__detector__defs_8h.html#aa695591372841e2c5580e4ed0f3620f">MAX_STR_LENGTH</a>];
<a name="l00162"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#8db7c92973c8af22116cf3bc38b6efb9">00162</a>     <span class="keywordtype">char</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#8db7c92973c8af22116cf3bc38b6efb9">calDir</a>[<a class="code" href="sls__detector__defs_8h.html#aa695591372841e2c5580e4ed0f3620f">MAX_STR_LENGTH</a>];
<a name="l00164"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5d7058d713cc890d7d469c44eab500e2">00164</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5d7058d713cc890d7d469c44eab500e2">nTrimEn</a>;
<a name="l00166"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#fba642bc1dcd491913723a1a4f88e6f0">00166</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#fba642bc1dcd491913723a1a4f88e6f0">trimEnergies</a>[100];
<a name="l00167"></a>00167 
<a name="l00168"></a>00168            
<a name="l00170"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#48bc3bbfc4292f81c490e73bb52d62e9">00170</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#48bc3bbfc4292f81c490e73bb52d62e9">fileIndex</a>;
<a name="l00172"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#91b926344339e977f57954dcf0aef2fb">00172</a>     <span class="keywordtype">char</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#91b926344339e977f57954dcf0aef2fb">filePath</a>[<a class="code" href="sls__detector__defs_8h.html#aa695591372841e2c5580e4ed0f3620f">MAX_STR_LENGTH</a>];
<a name="l00174"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5903fa90b0a18c4896082882a906aba0">00174</a>     <span class="keywordtype">char</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5903fa90b0a18c4896082882a906aba0">fileName</a>[<a class="code" href="sls__detector__defs_8h.html#aa695591372841e2c5580e4ed0f3620f">MAX_STR_LENGTH</a>];
<a name="l00175"></a>00175 
<a name="l00176"></a>00176   <span class="comment">/* size of the detector */</span>
<a name="l00177"></a>00177     
<a name="l00179"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#aadb7a55fa5aca830df32e41f7fff06d">00179</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#aadb7a55fa5aca830df32e41f7fff06d">nMod</a>[2];
<a name="l00181"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#8380248ff063419cae1a4454a49f359f">00181</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#8380248ff063419cae1a4454a49f359f">nMods</a>;
<a name="l00183"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#001f1ce26646f9367038aca388ca8910">00183</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#001f1ce26646f9367038aca388ca8910">nModMax</a>[2];
<a name="l00185"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#af9036fae1edd1a18ba311a903bc4fc6">00185</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#af9036fae1edd1a18ba311a903bc4fc6">nModsMax</a>;
<a name="l00187"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#7a47b57931d2ac0f31a9f334dd94d015">00187</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#7a47b57931d2ac0f31a9f334dd94d015">nChans</a>;
<a name="l00189"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#e7a48224edcce55cb28ad9b1f1a4d4f7">00189</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#e7a48224edcce55cb28ad9b1f1a4d4f7">nChips</a>;
<a name="l00191"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#7ffc3b1b55e34c1705717e4c5aaac564">00191</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#7ffc3b1b55e34c1705717e4c5aaac564">nDacs</a>;
<a name="l00193"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#f9e8b66bbe436f33191e876312ba0d2c">00193</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#f9e8b66bbe436f33191e876312ba0d2c">nAdcs</a>;
<a name="l00195"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#e8db406083e91d5f7bcbad93cea1c380">00195</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#e8db406083e91d5f7bcbad93cea1c380">dynamicRange</a>;
<a name="l00197"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#fbade261d7b298b6b605b6feff742f8b">00197</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#fbade261d7b298b6b605b6feff742f8b">dataBytes</a>;
<a name="l00198"></a>00198     
<a name="l00200"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#fa0612dcfba406d532a36f433363bdad">00200</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#fa0612dcfba406d532a36f433363bdad">correctionMask</a>;
<a name="l00202"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#8cb9a14f3eb2f280d0e57ee70a5e2f60">00202</a>     <span class="keywordtype">float</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#8cb9a14f3eb2f280d0e57ee70a5e2f60">tDead</a>;
<a name="l00204"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#237f834b800df65a32fc4bc5cd714283">00204</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#237f834b800df65a32fc4bc5cd714283">nBadChans</a>;
<a name="l00206"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#9ab536c77675cd30b26ab647efe5c3ca">00206</a>   <span class="keywordtype">char</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#9ab536c77675cd30b26ab647efe5c3ca">badChanFile</a>[<a class="code" href="sls__detector__defs_8h.html#aa695591372841e2c5580e4ed0f3620f">MAX_STR_LENGTH</a>];
<a name="l00208"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#4e03ad7a759acf38d4543e0df9ab9710">00208</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#4e03ad7a759acf38d4543e0df9ab9710">badChansList</a>[<a class="code" href="slsDetector_8h.html#458ac030ac964822b06ae7659da870df">MAX_BADCHANS</a>];
<a name="l00210"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#d117d6131cef782896adb054e6b00861">00210</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#d117d6131cef782896adb054e6b00861">nBadFF</a>;
<a name="l00212"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#ebf29d7d9b406d65f381c9446953bc14">00212</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#ebf29d7d9b406d65f381c9446953bc14">badFFList</a>[<a class="code" href="slsDetector_8h.html#458ac030ac964822b06ae7659da870df">MAX_BADCHANS</a>];
<a name="l00213"></a>00213     
<a name="l00215"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#42502564011f831f43733ffed7c2eafd">00215</a>   <span class="keywordtype">char</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#42502564011f831f43733ffed7c2eafd">angConvFile</a>[<a class="code" href="sls__detector__defs_8h.html#aa695591372841e2c5580e4ed0f3620f">MAX_STR_LENGTH</a>];
<a name="l00217"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#31cebbb4add050ac00b3fbe9b4494d8b">00217</a>     <a class="code" href="structangleConversionConstant.html">angleConversionConstant</a> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#31cebbb4add050ac00b3fbe9b4494d8b">angOff</a>[<a class="code" href="slsDetector_8h.html#86d84e5a6918e1cb1e2ecb75752e604a">MAXMODS</a>];
<a name="l00219"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#289a2fe819a4e02a93dfc54f9ba7ae16">00219</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#289a2fe819a4e02a93dfc54f9ba7ae16">angDirection</a>;
<a name="l00221"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5ca5b4ba561ff03260d4734f17273287">00221</a>     <span class="keywordtype">float</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5ca5b4ba561ff03260d4734f17273287">fineOffset</a>;
<a name="l00223"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#f4f3616855e8d7fa5a9a49774365497a">00223</a>     <span class="keywordtype">float</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#f4f3616855e8d7fa5a9a49774365497a">globalOffset</a>;
<a name="l00225"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#0ffc59bdf1f5d82da8c35ba48fd5f36d">00225</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#0ffc59bdf1f5d82da8c35ba48fd5f36d">numberOfPositions</a>;
<a name="l00227"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#bf1d315c4544329f53beb7c88eb47124">00227</a>     <span class="keywordtype">float</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#bf1d315c4544329f53beb7c88eb47124">detPositions</a>[<a class="code" href="slsDetector_8h.html#361088f7869d8e7c123b003e817915a5">MAXPOS</a>];
<a name="l00229"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#8a64597cae31d83524ea4e554e3798ab">00229</a>   <span class="keywordtype">float</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#8a64597cae31d83524ea4e554e3798ab">binSize</a>;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231   <span class="comment">/* infos necessary for the readout to determine the size of the data */</span>
<a name="l00233"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#46728c000c681867e5b15f6eb6833e09">00233</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#46728c000c681867e5b15f6eb6833e09">nROI</a>;
<a name="l00235"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#bfd660b175826b4bb6255baf356eb364">00235</a>     <a class="code" href="structROI.html">ROI</a> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#bfd660b175826b4bb6255baf356eb364">roiLimits</a>[<a class="code" href="slsDetector_8h.html#4c84515c2af98fbe570b5201a1022103">MAX_ROIS</a>];
<a name="l00237"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#e1c715ce4ba56b71fc868078acd44243">00237</a>     <a class="code" href="sls__detector__defs_8h.html#6165e3e90182cc47b0003f3288a2e579">readOutFlags</a> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#e1c715ce4ba56b71fc868078acd44243">roFlags</a>;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239  <span class="comment">/* detector setup - not needed */</span>
<a name="l00241"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#87e1f522b14c62f2bf43327e3584bbf2">00241</a>     <a class="code" href="sls__detector__defs_8h.html#754e2e1fdf9e993405c39b6050528d56">detectorSettings</a> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#87e1f522b14c62f2bf43327e3584bbf2">currentSettings</a>;
<a name="l00243"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#4b80cdf3517e1484ad9223f44d3979b6">00243</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#4b80cdf3517e1484ad9223f44d3979b6">currentThresholdEV</a>;
<a name="l00245"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#d731d48df5668aa86ce690e216e0c816">00245</a>     int64_t <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#d731d48df5668aa86ce690e216e0c816">timerValue</a>[<a class="code" href="slsDetector_8h.html#79fd3eac646964332ed33ec7dd40f208">MAX_TIMERS</a>];
<a name="l00247"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#904618e46e191d740569ba998623cba8">00247</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#904618e46e191d740569ba998623cba8">clkDiv</a>;
<a name="l00248"></a>00248     
<a name="l00249"></a>00249   <span class="comment">/*offsets*/</span>
<a name="l00251"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#4de66737ee8be8242ba8ad0a1a69a125">00251</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#4de66737ee8be8242ba8ad0a1a69a125">ffoff</a>;
<a name="l00253"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#ce126fabef8ea393b69d44eff536e4c6">00253</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#ce126fabef8ea393b69d44eff536e4c6">fferroff</a>;
<a name="l00255"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#6a69b2de8d6cde5155517ca71e47b693">00255</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#6a69b2de8d6cde5155517ca71e47b693">modoff</a>;
<a name="l00257"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#f79b4d2240f81814f668358c18272607">00257</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#f79b4d2240f81814f668358c18272607">dacoff</a>;
<a name="l00259"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5fea82d598a0252852d3b5aa3dcba778">00259</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5fea82d598a0252852d3b5aa3dcba778">adcoff</a>;
<a name="l00261"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#299382d528788680646246405934fb4c">00261</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#299382d528788680646246405934fb4c">chipoff</a>;
<a name="l00263"></a><a class="code" href="structslsDetector_1_1sharedSlsDetector.html#02e198988d9b1d5ca6d0391e6a9d0817">00263</a>     <span class="keywordtype">int</span> <a class="code" href="structslsDetector_1_1sharedSlsDetector.html#02e198988d9b1d5ca6d0391e6a9d0817">chanoff</a>;
<a name="l00264"></a>00264 
<a name="l00265"></a>00265 } <a class="code" href="structslsDetector_1_1sharedSlsDetector.html">sharedSlsDetector</a>;
<a name="l00266"></a>00266 
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 
<a name="l00275"></a>00275   <a class="code" href="classslsDetector.html#eea9fc044ff9d496e4338efaaf176498">slsDetector</a>(<a class="code" href="sls__detector__defs_8h.html#ab9f984f7b6798e684c8f3e6b63c6301">detectorType</a> type=<a class="code" href="sls__detector__defs_8h.html#ab9f984f7b6798e684c8f3e6b63c63019e022e6380da28dd73210ed34b137c36">GENERIC</a>, <span class="keywordtype">int</span> <span class="keywordtype">id</span>=0);
<a name="l00276"></a>00276   <span class="comment">//slsDetector(string  const fname);</span>
<a name="l00277"></a>00277   <span class="comment">//  ~slsDetector(){while(dataQueue.size()&gt;0){}};</span>
<a name="l00279"></a><a class="code" href="classslsDetector.html#7653e532ff88dbf403e270769bccc509">00279</a> <span class="comment"></span>  <a class="code" href="classslsDetector.html#7653e532ff88dbf403e270769bccc509">~slsDetector</a>(){};
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 
<a name="l00284"></a>00284   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#f041f723f702c17de292061d6d609698">setOnline</a>(<span class="keywordtype">int</span> <span class="keyword">const</span> online);  
<a name="l00287"></a><a class="code" href="classslsDetector.html#bf592960cebe5b3f1e2fdc77f770f17a">00287</a>   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#bf592960cebe5b3f1e2fdc77f770f17a">exists</a>() {<span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#ee2e81699a79e6b9ddc698d120a13ef9">alreadyExisting</a>;};
<a name="l00288"></a>00288 
<a name="l00295"></a>00295   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#80266f80cfe49c2ccec7118de341d983">readConfigurationFile</a>(string <span class="keyword">const</span> fname)=0;  
<a name="l00301"></a>00301   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#7801c6d43c72ce5ccaa72743a6f307d2">writeConfigurationFile</a>(string <span class="keyword">const</span> fname)=0;
<a name="l00302"></a>00302 
<a name="l00303"></a>00303 
<a name="l00304"></a>00304   <span class="comment">/* </span>
<a name="l00305"></a>00305 <span class="comment">     It should be possible to dump all the settings of the detector (including trimbits, threshold energy, gating/triggering, acquisition time etc.</span>
<a name="l00306"></a>00306 <span class="comment">     in a file and retrieve it for repeating the measurement with identicals ettings, if necessary</span>
<a name="l00307"></a>00307 <span class="comment">  */</span>
<a name="l00314"></a>00314   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#96428855d6e286408a52e675e045cf45">dumpDetectorSetup</a>(string <span class="keyword">const</span> fname)=0;  
<a name="l00320"></a>00320   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#0ec6aa8998db1bee1b00aeecbe870d5f">retrieveDetectorSetup</a>(string <span class="keyword">const</span> fname)=0;
<a name="l00321"></a>00321 
<a name="l00333"></a>00333   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#019a01c4465c5ee572293cb6c00d9904">setTCPSocket</a>(string <span class="keyword">const</span> name=<span class="stringliteral">""</span>, <span class="keywordtype">int</span> <span class="keyword">const</span> control_port=-1, <span class="keywordtype">int</span> <span class="keyword">const</span> stop_port=-1, <span class="keywordtype">int</span> <span class="keyword">const</span> data_port=-1);
<a name="l00335"></a><a class="code" href="classslsDetector.html#fad06908ad59bfd8a8577899d6aa1843">00335</a>   <span class="keywordtype">char</span>* <a class="code" href="classslsDetector.html#fad06908ad59bfd8a8577899d6aa1843">getHostname</a>() {<span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#bf7e3c0dca0810fbd1522e5885d9fe7a">hostname</a>;};
<a name="l00337"></a><a class="code" href="classslsDetector.html#40ffd69f1c40b26575954e826cdf606a">00337</a>   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#40ffd69f1c40b26575954e826cdf606a">getControlPort</a>() {<span class="keywordflow">return</span>  <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#11da9fd02e0833533a8b2de6ad3307d8">controlPort</a>;};
<a name="l00339"></a><a class="code" href="classslsDetector.html#80ab8f7f4cc6b2e92017a0c77f961b70">00339</a>   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#80ab8f7f4cc6b2e92017a0c77f961b70">getStopPort</a>() {<span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#fc7fef330e7b7ce0cd7470572a5f27b0">stopPort</a>;};
<a name="l00341"></a><a class="code" href="classslsDetector.html#35043766eecb3d760fd95d891bed8b16">00341</a>   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#35043766eecb3d760fd95d891bed8b16">getDataPort</a>() {<span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#108090dc9c97fe4d9f91357c27d56953">dataPort</a>;};
<a name="l00342"></a>00342  
<a name="l00343"></a>00343 
<a name="l00344"></a>00344   <span class="comment">/* I/O */</span>
<a name="l00346"></a><a class="code" href="classslsDetector.html#d4a858d9b3a1b31c5d5decdc9d757267">00346</a>   <span class="keywordtype">char</span>* <a class="code" href="classslsDetector.html#d4a858d9b3a1b31c5d5decdc9d757267">getTrimDir</a>() {<span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#4a4421330a2c207e5da36e3739305915">trimDir</a>;};
<a name="l00348"></a><a class="code" href="classslsDetector.html#646f389e75c23c2c8627c62fb1df2890">00348</a>   <span class="keywordtype">char</span>* <a class="code" href="classslsDetector.html#646f389e75c23c2c8627c62fb1df2890">setTrimDir</a>(string s) {sprintf(<a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#4a4421330a2c207e5da36e3739305915">trimDir</a>, s.c_str()); <span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#4a4421330a2c207e5da36e3739305915">trimDir</a>;};
<a name="l00355"></a><a class="code" href="classslsDetector.html#8862569a4a2530558914daa2e2251138">00355</a>   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#8862569a4a2530558914daa2e2251138">getTrimEn</a>(<span class="keywordtype">int</span> *en=NULL) {<span class="keywordflow">if</span> (en) {<span class="keywordflow">for</span> (<span class="keywordtype">int</span> ien=0; ien&lt;<a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5d7058d713cc890d7d469c44eab500e2">nTrimEn</a>; ien++) en[ien]=<a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#fba642bc1dcd491913723a1a4f88e6f0">trimEnergies</a>[ien];} <span class="keywordflow">return</span> (<a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5d7058d713cc890d7d469c44eab500e2">nTrimEn</a>);};
<a name="l00356"></a>00356 
<a name="l00366"></a>00366   <span class="keyword">virtual</span> <a class="code" href="structsls__detector__module.html">sls_detector_module</a>* <a class="code" href="classslsDetector.html#612b52469e27c6675969499d3680abe6">readTrimFile</a>(string fname,  <a class="code" href="structsls__detector__module.html">sls_detector_module</a>* myMod=NULL)=0;
<a name="l00367"></a>00367 
<a name="l00377"></a>00377   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#5b97351cfaffe067016dbcebbd0778a7">writeTrimFile</a>(string fname, <a class="code" href="structsls__detector__module.html">sls_detector_module</a> mod)=0; 
<a name="l00378"></a>00378   
<a name="l00387"></a>00387   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#5b97351cfaffe067016dbcebbd0778a7">writeTrimFile</a>(string fname, <span class="keywordtype">int</span> imod)=0;
<a name="l00388"></a>00388 
<a name="l00393"></a><a class="code" href="classslsDetector.html#57c4587267e50a21ba13ead83294bdb4">00393</a>   <span class="keywordtype">char</span>* <a class="code" href="classslsDetector.html#57c4587267e50a21ba13ead83294bdb4">setFilePath</a>(string s) {sprintf(<a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#91b926344339e977f57954dcf0aef2fb">filePath</a>, s.c_str()); <span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#91b926344339e977f57954dcf0aef2fb">filePath</a>;};
<a name="l00394"></a>00394 
<a name="l00399"></a><a class="code" href="classslsDetector.html#ec565bab03357d783cccae55232b03ba">00399</a>   <span class="keywordtype">char</span>* <a class="code" href="classslsDetector.html#ec565bab03357d783cccae55232b03ba">setFileName</a>(string s) {sprintf(<a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5903fa90b0a18c4896082882a906aba0">fileName</a>, s.c_str()); <span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5903fa90b0a18c4896082882a906aba0">fileName</a>;}; 
<a name="l00400"></a>00400 
<a name="l00405"></a><a class="code" href="classslsDetector.html#22326d5e85503bfd16e4bdb279babb43">00405</a>   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#22326d5e85503bfd16e4bdb279babb43">setFileIndex</a>(<span class="keywordtype">int</span> i) {<a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#48bc3bbfc4292f81c490e73bb52d62e9">fileIndex</a>=i; <span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#48bc3bbfc4292f81c490e73bb52d62e9">fileIndex</a>;}; 
<a name="l00406"></a>00406   
<a name="l00411"></a><a class="code" href="classslsDetector.html#b4158bdacd10fccedeab9eacbd1f4304">00411</a>   <span class="keywordtype">char</span>* <a class="code" href="classslsDetector.html#b4158bdacd10fccedeab9eacbd1f4304">getFilePath</a>() {<span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#91b926344339e977f57954dcf0aef2fb">filePath</a>;};
<a name="l00412"></a>00412   
<a name="l00417"></a><a class="code" href="classslsDetector.html#717a3c59681f81ceaf5245a073eeacdb">00417</a>   <span class="keywordtype">char</span>* <a class="code" href="classslsDetector.html#717a3c59681f81ceaf5245a073eeacdb">getFileName</a>() {<span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#5903fa90b0a18c4896082882a906aba0">fileName</a>;};
<a name="l00418"></a>00418 
<a name="l00423"></a><a class="code" href="classslsDetector.html#68b41fa20ddd8c6c67ac00dfea3c9796">00423</a>   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#68b41fa20ddd8c6c67ac00dfea3c9796">getFileIndex</a>() {<span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#48bc3bbfc4292f81c490e73bb52d62e9">fileIndex</a>;};
<a name="l00424"></a>00424   
<a name="l00436"></a>00436   string <a class="code" href="classslsDetector.html#d055c470ae6faa973980f4dbf021132d">createFileName</a>();
<a name="l00437"></a>00437   
<a name="l00452"></a>00452   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#08823d7078b5e6dd1a4cb7d8b3cfe0af">writeDataFile</a>(string fname, <span class="keywordtype">float</span> *data, <span class="keywordtype">float</span> *err=NULL, <span class="keywordtype">float</span> *ang=NULL, <span class="keywordtype">char</span> dataformat=<span class="charliteral">'f'</span>, <span class="keywordtype">int</span> nch=-1)=0; 
<a name="l00453"></a>00453   
<a name="l00462"></a>00462   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#08823d7078b5e6dd1a4cb7d8b3cfe0af">writeDataFile</a>(string fname, <span class="keywordtype">int</span> *data)=0;
<a name="l00463"></a>00463   
<a name="l00478"></a>00478   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#86df95809e0e7979eafc04b2b868843d">readDataFile</a>(string fname, <span class="keywordtype">float</span> *data, <span class="keywordtype">float</span> *err=NULL, <span class="keywordtype">float</span> *ang=NULL, <span class="keywordtype">char</span> dataformat=<span class="charliteral">'f'</span>, <span class="keywordtype">int</span> nch=0)=0;  
<a name="l00479"></a>00479 
<a name="l00488"></a>00488   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#86df95809e0e7979eafc04b2b868843d">readDataFile</a>(string fname, <span class="keywordtype">int</span> *data)=0;
<a name="l00489"></a>00489 
<a name="l00494"></a><a class="code" href="classslsDetector.html#102679594e60ed261daff24b4aeac21a">00494</a>   <span class="keywordtype">char</span>* <a class="code" href="classslsDetector.html#102679594e60ed261daff24b4aeac21a">getCalDir</a>() {cout &lt;&lt; <span class="stringliteral">"cal dir is "</span> &lt;&lt; <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#8db7c92973c8af22116cf3bc38b6efb9">calDir</a>; <span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#8db7c92973c8af22116cf3bc38b6efb9">calDir</a>;};
<a name="l00495"></a>00495 
<a name="l00496"></a>00496 
<a name="l00501"></a><a class="code" href="classslsDetector.html#9c4d2c796c176852537ff3cff4f5974b">00501</a>   <span class="keywordtype">char</span>* <a class="code" href="classslsDetector.html#9c4d2c796c176852537ff3cff4f5974b">setCalDir</a>(string s) {sprintf(<a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#8db7c92973c8af22116cf3bc38b6efb9">calDir</a>, s.c_str()); <span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#8db7c92973c8af22116cf3bc38b6efb9">calDir</a>;}; 
<a name="l00510"></a>00510   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#6c7f837f0820b08f41649c30151cb7ac">readCalibrationFile</a>(string fname, <span class="keywordtype">float</span> &amp;gain, <span class="keywordtype">float</span> &amp;offset)=0;
<a name="l00519"></a>00519   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#d12edef440bf2b2f930e83f0ccceb01e">writeCalibrationFile</a>(string fname, <span class="keywordtype">float</span> gain, <span class="keywordtype">float</span> offset)=0;
<a name="l00520"></a>00520 
<a name="l00521"></a>00521 
<a name="l00528"></a>00528   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#cd9d6358db471600f2e1a143a53c61c1">readAngularConversion</a>(string fname=<span class="stringliteral">""</span>)=0;
<a name="l00535"></a>00535   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#cace8f0d8706a175915289d86c1fd8d6">writeAngularConversion</a>(string fname=<span class="stringliteral">""</span>)=0;
<a name="l00536"></a>00536  
<a name="l00537"></a>00537 
<a name="l00538"></a>00538 
<a name="l00539"></a>00539   <span class="comment">/* Communication to server */</span>
<a name="l00540"></a>00540 
<a name="l00541"></a>00541 
<a name="l00549"></a>00549   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#9fc0c9161e967094a535cc40bc33cc6b">execCommand</a>(string cmd, string answer);
<a name="l00550"></a>00550   
<a name="l00557"></a>00557   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#e76a665a8d7a6b37d85aff129d3afdef">setDetectorType</a>(<a class="code" href="sls__detector__defs_8h.html#ab9f984f7b6798e684c8f3e6b63c6301">detectorType</a> type=<a class="code" href="sls__detector__defs_8h.html#ab9f984f7b6798e684c8f3e6b63c63013f15e91cc11ac10e7751457ebb3a675a">GET_DETECTOR_TYPE</a>);  
<a name="l00558"></a>00558 
<a name="l00565"></a>00565   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#e76a665a8d7a6b37d85aff129d3afdef">setDetectorType</a>(string type);  
<a name="l00566"></a>00566 
<a name="l00572"></a>00572   <span class="keywordtype">void</span> <a class="code" href="classslsDetector.html#d63d6420e411ff4b962930d9c4fd615d">getDetectorType</a>(<span class="keywordtype">char</span> *type);
<a name="l00573"></a>00573 
<a name="l00574"></a>00574 
<a name="l00575"></a>00575   <span class="comment">// Detector configuration functions</span>
<a name="l00583"></a>00583 <span class="comment"></span>  <span class="comment">// Detector configuration functions</span>
<a name="l00590"></a>00590 <span class="comment"></span>  <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#9e4117c0234d51b22922a2d638e118ab">setNumberOfModules</a>(<span class="keywordtype">int</span> n, <a class="code" href="sls__detector__defs_8h.html#83314ec5aea2e25bc6255af2e5d36dc9">dimension</a> d=<a class="code" href="sls__detector__defs_8h.html#83314ec5aea2e25bc6255af2e5d36dc958833a3110c570fb05130d40c365d1e4">X</a>); <span class="comment">// if n=GET_FLAG returns the number of installed modules</span>
<a name="l00591"></a>00591 
<a name="l00592"></a>00592   <span class="comment">/*</span>
<a name="l00593"></a>00593 <span class="comment">    returns the instrinsic size of the detector (maxmodx, maxmody, nchans, nchips, ndacs</span>
<a name="l00594"></a>00594 <span class="comment">    enum numberOf {</span>
<a name="l00595"></a>00595 <span class="comment">    MAXMODX,</span>
<a name="l00596"></a>00596 <span class="comment">    MAXMODY,</span>
<a name="l00597"></a>00597 <span class="comment">    CHANNELS,</span>
<a name="l00598"></a>00598 <span class="comment">    CHIPS,</span>
<a name="l00599"></a>00599 <span class="comment">    DACS</span>
<a name="l00600"></a>00600 <span class="comment">    }</span>
<a name="l00601"></a>00601 <span class="comment">  */</span>
<a name="l00602"></a>00602 
<a name="l00603"></a>00603 
<a name="l00609"></a>00609   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#d608a77a1c64989ad82175991be0a9b5">getMaxNumberOfModules</a>(<a class="code" href="sls__detector__defs_8h.html#83314ec5aea2e25bc6255af2e5d36dc9">dimension</a> d=<a class="code" href="sls__detector__defs_8h.html#83314ec5aea2e25bc6255af2e5d36dc958833a3110c570fb05130d40c365d1e4">X</a>); <span class="comment">//</span>
<a name="l00610"></a>00610  
<a name="l00611"></a>00611  
<a name="l00618"></a>00618   <a class="code" href="sls__detector__defs_8h.html#a436b9d7264c77b77021fe6adc33f6ed">externalSignalFlag</a> <a class="code" href="classslsDetector.html#5878c33a1353f1d32c383be4169531e7">setExternalSignalFlags</a>(<a class="code" href="sls__detector__defs_8h.html#a436b9d7264c77b77021fe6adc33f6ed">externalSignalFlag</a> pol=<a class="code" href="sls__detector__defs_8h.html#a436b9d7264c77b77021fe6adc33f6ed1ac6595a82aacbd6611252fd86a2cf77">GET_EXTERNAL_SIGNAL_FLAG</a> , <span class="keywordtype">int</span> signalindex=0);
<a name="l00619"></a>00619 
<a name="l00620"></a>00620  
<a name="l00628"></a>00628   <a class="code" href="sls__detector__defs_8h.html#51d6eb28d9d010319da9ce5da86ed32f">externalCommunicationMode</a> <a class="code" href="classslsDetector.html#2f7bac599bf5bb103debcd9342b65edd">setExternalCommunicationMode</a>(<a class="code" href="sls__detector__defs_8h.html#51d6eb28d9d010319da9ce5da86ed32f">externalCommunicationMode</a> pol=<a class="code" href="sls__detector__defs_8h.html#51d6eb28d9d010319da9ce5da86ed32fecc1279a26625814e7d763b02bd8c953">GET_EXTERNAL_COMMUNICATION_MODE</a>);
<a name="l00629"></a>00629 
<a name="l00630"></a>00630 
<a name="l00631"></a>00631   <span class="comment">// Tests and identification</span>
<a name="l00632"></a>00632  
<a name="l00639"></a>00639   int64_t <a class="code" href="classslsDetector.html#92f9261c62652e3643eebfdfa9942099">getId</a>(<a class="code" href="sls__detector__defs_8h.html#fc5d5f295e6405046702fc95e6d6d0ea">idMode</a> mode, <span class="keywordtype">int</span> imod=0);
<a name="l00646"></a>00646   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#40906e79010db5b8082d4855a3824aa7">digitalTest</a>(<a class="code" href="sls__detector__defs_8h.html#e4663256797974408ea7fbe5b86635c8">digitalTestMode</a> mode, <span class="keywordtype">int</span> imod=0);
<a name="l00655"></a>00655   <span class="keywordtype">int</span>* <a class="code" href="classslsDetector.html#18f91f8cf70d2d4eef9b3488b90bac51">analogTest</a>(<a class="code" href="sls__detector__defs_8h.html#44f69dfb7317afdfb166d178f4b1a6fe">analogTestMode</a> mode);
<a name="l00656"></a>00656   
<a name="l00662"></a>00662   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#a83074759c48f194af2e45d1281cc818">enableAnalogOutput</a>(<span class="keywordtype">int</span> ichan);
<a name="l00663"></a>00663   
<a name="l00669"></a>00669   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#a83074759c48f194af2e45d1281cc818">enableAnalogOutput</a>(<span class="keywordtype">int</span> imod, <span class="keywordtype">int</span> ichip, <span class="keywordtype">int</span> ichan);
<a name="l00670"></a>00670 
<a name="l00679"></a>00679   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#a8fafd5690120579f484e326dc6fd9be">giveCalibrationPulse</a>(<span class="keywordtype">float</span> vcal, <span class="keywordtype">int</span> npulses);
<a name="l00680"></a>00680 
<a name="l00681"></a>00681   <span class="comment">// Expert Initialization functions</span>
<a name="l00682"></a>00682  
<a name="l00683"></a>00683 
<a name="l00691"></a>00691   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#742c8c6b4e7f3cad4f7e60c8c7c0c18b">writeRegister</a>(<span class="keywordtype">int</span> addr, <span class="keywordtype">int</span> val);
<a name="l00692"></a>00692   
<a name="l00699"></a>00699   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#89ba6d2d8e79a60270e7e1c217df2d79">readRegister</a>(<span class="keywordtype">int</span> addr);
<a name="l00700"></a>00700 
<a name="l00708"></a>00708   <span class="keywordtype">float</span> <a class="code" href="classslsDetector.html#cfcce08c547e24dc09968a74e35daf40">setDAC</a>(<span class="keywordtype">float</span> val, <a class="code" href="sls__detector__defs_8h.html#049814e50aa3d3237f51a4d7185ad4fe">dacIndex</a> index, <span class="keywordtype">int</span> imod=-1);
<a name="l00709"></a>00709   
<a name="l00716"></a>00716   <span class="keywordtype">float</span> <a class="code" href="classslsDetector.html#fa99bd04043c23b7ab583159dabebf93">getADC</a>(<a class="code" href="sls__detector__defs_8h.html#049814e50aa3d3237f51a4d7185ad4fe">dacIndex</a> index, <span class="keywordtype">int</span> imod=0); 
<a name="l00717"></a>00717  
<a name="l00727"></a>00727   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#bed71bb89a69cbf24de31de9f5f478bc">setChannel</a>(int64_t reg, <span class="keywordtype">int</span> ichan=-1, <span class="keywordtype">int</span> ichip=-1, <span class="keywordtype">int</span> imod=-1);  
<a name="l00728"></a>00728 
<a name="l00734"></a>00734   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#bed71bb89a69cbf24de31de9f5f478bc">setChannel</a>(<a class="code" href="structsls__detector__channel.html">sls_detector_channel</a> chan);
<a name="l00735"></a>00735 
<a name="l00743"></a>00743   <a class="code" href="structsls__detector__channel.html">sls_detector_channel</a> <a class="code" href="classslsDetector.html#05f1a170b7416db77bf7cff762e9b58a">getChannel</a>(<span class="keywordtype">int</span> ichan, <span class="keywordtype">int</span> ichip, <span class="keywordtype">int</span> imod);
<a name="l00744"></a>00744   
<a name="l00745"></a>00745 
<a name="l00746"></a>00746 
<a name="l00755"></a>00755   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#18cf730c59f5981fb5e22ebf460b9abc">setChip</a>(<span class="keywordtype">int</span> reg, <span class="keywordtype">int</span> ichip=-1, <span class="keywordtype">int</span> imod=-1);
<a name="l00756"></a>00756   
<a name="l00763"></a>00763   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#18cf730c59f5981fb5e22ebf460b9abc">setChip</a>(<a class="code" href="structsls__detector__chip.html">sls_detector_chip</a> chip); 
<a name="l00764"></a>00764 
<a name="l00773"></a>00773   <a class="code" href="structsls__detector__chip.html">sls_detector_chip</a> <a class="code" href="classslsDetector.html#2eb7f887a72cc80d6b00cadd4731e672">getChip</a>(<span class="keywordtype">int</span> ichip, <span class="keywordtype">int</span> imod);
<a name="l00774"></a>00774 
<a name="l00775"></a>00775 
<a name="l00782"></a>00782   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#1be9e16689befa0d654345bc30ccd68e">setModule</a>(<span class="keywordtype">int</span> reg, <span class="keywordtype">int</span> imod=-1); 
<a name="l00783"></a>00783 
<a name="l00790"></a>00790   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#1be9e16689befa0d654345bc30ccd68e">setModule</a>(<a class="code" href="structsls__detector__module.html">sls_detector_module</a> module);
<a name="l00791"></a>00791 
<a name="l00797"></a>00797   <a class="code" href="structsls__detector__module.html">sls_detector_module</a> *<a class="code" href="classslsDetector.html#32557eee02e541840246b4b4a3e76c83">getModule</a>(<span class="keywordtype">int</span> imod);
<a name="l00798"></a>00798  
<a name="l00799"></a>00799   <span class="comment">// calibration functions</span>
<a name="l00800"></a>00800   <span class="comment">//  int setCalibration(int imod, detectorSettings isettings, float gain, float offset);</span>
<a name="l00801"></a>00801   <span class="comment">//int getCalibration(int imod, detectorSettings isettings, float &amp;gain, float &amp;offset);</span>
<a name="l00802"></a>00802   
<a name="l00803"></a>00803 
<a name="l00804"></a>00804   <span class="comment">/*</span>
<a name="l00805"></a>00805 <span class="comment">    calibrated setup of the threshold</span>
<a name="l00806"></a>00806 <span class="comment">  */</span>  
<a name="l00812"></a>00812   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#f2da634bb9551730c12e07e2b772bf06">getThresholdEnergy</a>(<span class="keywordtype">int</span> imod=-1);  
<a name="l00813"></a>00813 
<a name="l00821"></a>00821   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#ab00a8eeca28831751121054e35d4c6b">setThresholdEnergy</a>(<span class="keywordtype">int</span> e_eV, <span class="keywordtype">int</span> imod=-1, <a class="code" href="sls__detector__defs_8h.html#754e2e1fdf9e993405c39b6050528d56">detectorSettings</a> isettings=<a class="code" href="sls__detector__defs_8h.html#754e2e1fdf9e993405c39b6050528d56ebe806e2682b05129c75bfdc7a72932b">GET_SETTINGS</a>); 
<a name="l00822"></a>00822  
<a name="l00828"></a>00828   <a class="code" href="sls__detector__defs_8h.html#754e2e1fdf9e993405c39b6050528d56">detectorSettings</a> <a class="code" href="classslsDetector.html#cfccfada625943feb410c6a14607a366">getSettings</a>(<span class="keywordtype">int</span> imod=-1);  
<a name="l00829"></a>00829 
<a name="l00838"></a>00838   <a class="code" href="sls__detector__defs_8h.html#754e2e1fdf9e993405c39b6050528d56">detectorSettings</a> <a class="code" href="classslsDetector.html#765072d5c8aaff56ca79734072607188">setSettings</a>(<a class="code" href="sls__detector__defs_8h.html#754e2e1fdf9e993405c39b6050528d56">detectorSettings</a> isettings, <span class="keywordtype">int</span> imod=-1);
<a name="l00839"></a>00839 
<a name="l00840"></a>00840 
<a name="l00841"></a>00841 <span class="comment">// Acquisition functions</span>
<a name="l00842"></a>00842 
<a name="l00843"></a>00843 
<a name="l00848"></a>00848   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#49f44b9f27ce82d384ddfa0d229a0dee">startAcquisition</a>();
<a name="l00849"></a>00849 
<a name="l00854"></a>00854   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#07a3d8c3c0e03ec8f286a87673911c28">stopAcquisition</a>();
<a name="l00855"></a>00855   
<a name="l00860"></a>00860   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#8314acd65ffb54f355967a5c6827448e">startReadOut</a>();
<a name="l00861"></a>00861 
<a name="l00866"></a>00866   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#567629b942b153a03cfc66d4d26c5daa">getRunStatus</a>();
<a name="l00867"></a>00867 
<a name="l00873"></a>00873   <span class="keywordtype">int</span>* <a class="code" href="classslsDetector.html#fb4bb3d4e734c98684b60d283f34f128">startAndReadAll</a>();
<a name="l00874"></a>00874   
<a name="l00879"></a>00879   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#2e0a975f982971744ada81d346d84489">startAndReadAllNoWait</a>(); 
<a name="l00880"></a>00880 
<a name="l00886"></a>00886   <span class="keywordtype">int</span>* <a class="code" href="classslsDetector.html#5b678231f1a0fafc518a95b6e58f00a8">getDataFromDetectorNoWait</a>(); 
<a name="l00887"></a>00887 
<a name="l00893"></a>00893   <span class="keywordtype">int</span>* <a class="code" href="classslsDetector.html#b352d85c5a4f415d1ec930d17bae87fa">readFrame</a>(); 
<a name="l00894"></a>00894 
<a name="l00900"></a>00900   <span class="keywordtype">int</span>* <a class="code" href="classslsDetector.html#87acdd8cd43d30dc3dd88763b6e23d08">readAll</a>();
<a name="l00901"></a>00901 
<a name="l00902"></a>00902   
<a name="l00908"></a>00908   <span class="keywordtype">int</span>* <a class="code" href="classslsDetector.html#ee85bddb6aa7b37c99f1397112e6c8b6">popDataQueue</a>();
<a name="l00909"></a>00909 
<a name="l00915"></a>00915   <a class="code" href="classdetectorData.html">detectorData</a>* <a class="code" href="classslsDetector.html#1f8b5d695dbf8865665261a02ced3238">popFinalDataQueue</a>();
<a name="l00922"></a>00922   int64_t <a class="code" href="classslsDetector.html#b78e1d801e92a9f5a06008d9e9731549">setTimer</a>(<a class="code" href="sls__detector__defs_8h.html#07c87ebf35dffccd06fe39859a3ca603">timerIndex</a> index, int64_t t=-1);
<a name="l00923"></a>00923 
<a name="l00929"></a>00929   int64_t <a class="code" href="classslsDetector.html#61f072fcaf0a359148f52ea34769c846">getTimeLeft</a>(<a class="code" href="sls__detector__defs_8h.html#07c87ebf35dffccd06fe39859a3ca603">timerIndex</a> index);
<a name="l00930"></a>00930 
<a name="l00931"></a>00931 
<a name="l00932"></a>00932 
<a name="l00933"></a>00933 
<a name="l00940"></a>00940   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#8e35d9440a03e127ef5fe7a909702675">setSpeed</a>(<a class="code" href="sls__detector__defs_8h.html#8c326f6a87754392b72098d3d0dec49d">speedVariable</a> sp, <span class="keywordtype">int</span> value=-1);
<a name="l00941"></a>00941 
<a name="l00942"></a>00942   <span class="comment">// Flags</span>
<a name="l00950"></a>00950 <span class="comment"></span>  <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#57d00f77b9c12d9a01407d5a74bacddb">setDynamicRange</a>(<span class="keywordtype">int</span> n=-1);
<a name="l00951"></a>00951  
<a name="l00957"></a>00957   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#e2a0716ddc050b79a45c552236ff2284">setROI</a>(<span class="keywordtype">int</span> nroi=-1, <span class="keywordtype">int</span> *xmin=NULL, <span class="keywordtype">int</span> *xmax=NULL, <span class="keywordtype">int</span> *ymin=NULL, <span class="keywordtype">int</span> *ymax=NULL);
<a name="l00958"></a>00958   
<a name="l00959"></a>00959 
<a name="l00965"></a>00965   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#e86bd9ff0d87efe9327118b5349321c4">setReadOutFlags</a>(<a class="code" href="sls__detector__defs_8h.html#6165e3e90182cc47b0003f3288a2e579">readOutFlags</a> flag);
<a name="l00966"></a>00966 
<a name="l00975"></a>00975   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#a257317d18965a353679c66b15b0987d">executeTrimming</a>(<a class="code" href="sls__detector__defs_8h.html#032d987fb5fbd375236b7f58f0168f33">trimMode</a> mode, <span class="keywordtype">int</span> par1, <span class="keywordtype">int</span> par2, <span class="keywordtype">int</span> imod=-1);
<a name="l00976"></a>00976 
<a name="l00977"></a>00977  
<a name="l00978"></a>00978   <span class="comment">//Corrections</span>
<a name="l00979"></a>00979 
<a name="l00985"></a>00985   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#b4e2c11303714d5e62b4fcc22f829d8f">setFlatFieldCorrection</a>(string fname=<span class="stringliteral">""</span>); 
<a name="l00986"></a>00986 
<a name="l00993"></a>00993   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#062700a0470f96b20ba842bcd6aa9b63">getFlatFieldCorrection</a>(<span class="keywordtype">float</span> *corr=NULL, <span class="keywordtype">float</span> *ecorr=NULL);
<a name="l00994"></a>00994 
<a name="l01000"></a>01000   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#c89f7fc9f9255e573e34f8d3dadf38af">setRateCorrection</a>(<span class="keywordtype">float</span> t=0);
<a name="l01001"></a>01001 
<a name="l01002"></a>01002   
<a name="l01008"></a>01008   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#c7a659ab136c9e5ece059fc9356c6a91">getRateCorrection</a>(<span class="keywordtype">float</span> &amp;t);  
<a name="l01009"></a>01009 
<a name="l01014"></a>01014   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#c7a659ab136c9e5ece059fc9356c6a91">getRateCorrection</a>();
<a name="l01015"></a>01015   
<a name="l01021"></a>01021   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#45833eb571b8cb20225f4046e2a17e5a">setBadChannelCorrection</a>(string fname=<span class="stringliteral">""</span>);
<a name="l01022"></a>01022   
<a name="l01028"></a>01028   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#62f84759c85d7f4323bb34bf2a4dc5c5">getBadChannelCorrection</a>(<span class="keywordtype">int</span> *bad=NULL);
<a name="l01029"></a>01029 
<a name="l01031"></a><a class="code" href="classslsDetector.html#0b562f90b64c80e3eb64e9e2153bb234">01031</a>   <span class="keywordtype">char</span> *<a class="code" href="classslsDetector.html#0b562f90b64c80e3eb64e9e2153bb234">getBadChannelCorrectionFile</a>() {<span class="keywordflow">return</span> <a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>-&gt;<a class="code" href="structslsDetector_1_1sharedSlsDetector.html#9ab536c77675cd30b26ab647efe5c3ca">badChanFile</a>;};
<a name="l01032"></a>01032 
<a name="l01033"></a>01033   
<a name="l01041"></a>01041   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#0a17abc301de750f7dafd43b7ad8b0c9">setAngularConversion</a>(string fname=<span class="stringliteral">""</span>)=0;
<a name="l01042"></a>01042 
<a name="l01051"></a>01051   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#0c2e502441fd74ec7fc20604c5c08c27">getAngularConversion</a>(<span class="keywordtype">int</span> &amp;direction,  <a class="code" href="structangleConversionConstant.html">angleConversionConstant</a> *angconv=NULL)=0;
<a name="l01052"></a>01052   
<a name="l01053"></a>01053   
<a name="l01058"></a>01058   <span class="keyword">virtual</span> <span class="keywordtype">char</span> *<a class="code" href="classslsDetector.html#0c2e502441fd74ec7fc20604c5c08c27">getAngularConversion</a>()=0;
<a name="l01059"></a>01059   
<a name="l01065"></a>01065   <span class="keyword">virtual</span> <span class="keywordtype">float</span> <a class="code" href="classslsDetector.html#2a03a8aec6dbf74a606e6960e178fceb">setGlobalOffset</a>(<span class="keywordtype">float</span> f)=0; 
<a name="l01066"></a>01066 
<a name="l01072"></a>01072   <span class="keyword">virtual</span> <span class="keywordtype">float</span> <a class="code" href="classslsDetector.html#7b3b6b3ac5b3b1ee0677f7deeec5c9e3">setFineOffset</a>(<span class="keywordtype">float</span> f)=0;
<a name="l01078"></a>01078   <span class="keyword">virtual</span> <span class="keywordtype">float</span> <a class="code" href="classslsDetector.html#8e39680a1a096ca13ed672504b5b08e6">getFineOffset</a>()=0;
<a name="l01079"></a>01079   
<a name="l01085"></a>01085   <span class="keyword">virtual</span> <span class="keywordtype">float</span> <a class="code" href="classslsDetector.html#8964e3efa73f29b04bd9479578bd1c59">getGlobalOffset</a>()=0;
<a name="l01086"></a>01086 
<a name="l01095"></a>01095   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#961e3976e3077803e2fc245873f81d81">setPositions</a>(<span class="keywordtype">int</span> nPos, <span class="keywordtype">float</span> *<a class="code" href="usersFunctions_8c.html#f14c6d623ff1aec896b4d087ab74caa0">pos</a>)=0;
<a name="l01103"></a>01103   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#248794801b9794d20e7d58bceab564ab">getPositions</a>(<span class="keywordtype">float</span> *<a class="code" href="usersFunctions_8c.html#f14c6d623ff1aec896b4d087ab74caa0">pos</a>=NULL)=0;
<a name="l01104"></a>01104   
<a name="l01105"></a>01105   
<a name="l01112"></a>01112   <span class="keyword">virtual</span> <span class="keywordtype">float</span> <a class="code" href="classslsDetector.html#1a2ebbe67dae42059723071f437eb721">setBinSize</a>(<span class="keywordtype">float</span> bs)=0;
<a name="l01113"></a>01113 
<a name="l01118"></a>01118   <span class="keyword">virtual</span> <span class="keywordtype">float</span> <a class="code" href="classslsDetector.html#7d83754e3f41042caa9297da9a33b714">getBinSize</a>()=0;
<a name="l01119"></a>01119 
<a name="l01120"></a>01120 
<a name="l01121"></a>01121 
<a name="l01122"></a>01122 
<a name="l01123"></a>01123 
<a name="l01124"></a>01124 
<a name="l01130"></a>01130   <span class="keywordtype">float</span>* <a class="code" href="classslsDetector.html#937d257464bade6dc6d3ab42c86843ba">decodeData</a>(<span class="keywordtype">int</span> *datain);
<a name="l01131"></a>01131 
<a name="l01132"></a>01132   
<a name="l01133"></a>01133   
<a name="l01134"></a>01134   
<a name="l01145"></a>01145   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#24c7dd58e00df0bf62221b7572430740">flatFieldCorrect</a>(<span class="keywordtype">float</span> datain, <span class="keywordtype">float</span> errin, <span class="keywordtype">float</span> &amp;dataout, <span class="keywordtype">float</span> &amp;errout, <span class="keywordtype">float</span> ffcoefficient, <span class="keywordtype">float</span> fferr);
<a name="l01146"></a>01146   
<a name="l01155"></a>01155   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#24c7dd58e00df0bf62221b7572430740">flatFieldCorrect</a>(<span class="keywordtype">float</span>* datain, <span class="keywordtype">float</span> *errin, <span class="keywordtype">float</span>* dataout, <span class="keywordtype">float</span> *errout);
<a name="l01156"></a>01156  
<a name="l01157"></a>01157 
<a name="l01158"></a>01158   
<a name="l01169"></a>01169   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#e8c2d03ab2c870d2f1ff7a861cfeb6d1">rateCorrect</a>(<span class="keywordtype">float</span> datain, <span class="keywordtype">float</span> errin, <span class="keywordtype">float</span> &amp;dataout, <span class="keywordtype">float</span> &amp;errout, <span class="keywordtype">float</span> tau, <span class="keywordtype">float</span> t);
<a name="l01170"></a>01170   
<a name="l01179"></a>01179   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#e8c2d03ab2c870d2f1ff7a861cfeb6d1">rateCorrect</a>(<span class="keywordtype">float</span>* datain, <span class="keywordtype">float</span> *errin, <span class="keywordtype">float</span>* dataout, <span class="keywordtype">float</span> *errout);
<a name="l01180"></a>01180 
<a name="l01181"></a>01181   
<a name="l01192"></a>01192   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#20156c620f868445e454bc4115871822">resetMerging</a>(<span class="keywordtype">float</span> *mp, <span class="keywordtype">float</span> *mv,<span class="keywordtype">float</span> *me, <span class="keywordtype">int</span> *mm)=0;
<a name="l01205"></a>01205   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#feb8730f24292620e5d451cd2d4bb9cd">addToMerging</a>(<span class="keywordtype">float</span> *p1, <span class="keywordtype">float</span> *v1, <span class="keywordtype">float</span> *e1, <span class="keywordtype">float</span> *mp, <span class="keywordtype">float</span> *mv,<span class="keywordtype">float</span> *me, <span class="keywordtype">int</span> *mm)=0;
<a name="l01206"></a>01206 
<a name="l01216"></a>01216   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#8f73479f68ca2171fd2108c2f157299e">finalizeMerging</a>(<span class="keywordtype">float</span> *mp, <span class="keywordtype">float</span> *mv,<span class="keywordtype">float</span> *me, <span class="keywordtype">int</span> *mm);
<a name="l01217"></a>01217 
<a name="l01221"></a>01221   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#466e9a65aa0b404c771d70c9f01af8b9">exitServer</a>();
<a name="l01222"></a>01222 
<a name="l01228"></a>01228   <span class="keyword">virtual</span> <span class="keywordtype">void</span>* <a class="code" href="classslsDetector.html#3e93c7da79e5f72e3a3c881aefdea5d3">processData</a>(<span class="keywordtype">int</span> delflag=1)=0; <span class="comment">// thread function</span>
<a name="l01233"></a>01233 <span class="comment"></span>  <a class="code" href="structsls__detector__module.html">sls_detector_module</a>*  <a class="code" href="classslsDetector.html#b1d4c6c01d1e10fe06bc83329410d4f4">createModule</a>();
<a name="l01239"></a>01239   <span class="keywordtype">void</span> <a class="code" href="classslsDetector.html#48984c8d058355c5249233165bf0c410">deleteModule</a>(<a class="code" href="structsls__detector__module.html">sls_detector_module</a> *myMod);
<a name="l01240"></a>01240 
<a name="l01241"></a>01241 
<a name="l01253"></a>01253   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classslsDetector.html#1af6548fd0d81d45909a5c805d4be7a8">acquire</a>(<span class="keywordtype">int</span> delflag=1)=0;
<a name="l01254"></a>01254 
<a name="l01255"></a>01255  <span class="keyword">protected</span>:
<a name="l01256"></a>01256  
<a name="l01260"></a><a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">01260</a>   <a class="code" href="structslsDetector_1_1sharedSlsDetector.html">sharedSlsDetector</a> *<a class="code" href="classslsDetector.html#fe0da5c1491ebf18f187f0a26c5ded11">thisDetector</a>;
<a name="l01261"></a>01261 
<a name="l01265"></a><a class="code" href="classslsDetector.html#7572bba8e53f900d4126657827bec3cf">01265</a>   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#7572bba8e53f900d4126657827bec3cf">onlineFlag</a>;
<a name="l01266"></a>01266   
<a name="l01270"></a><a class="code" href="classslsDetector.html#37f4af284283e7a18a28cec3f4e4532f">01270</a>   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#37f4af284283e7a18a28cec3f4e4532f">detId</a>;
<a name="l01271"></a>01271   
<a name="l01275"></a><a class="code" href="classslsDetector.html#53a78c7fe99f93b9bba8d0c2cb32a181">01275</a>   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#53a78c7fe99f93b9bba8d0c2cb32a181">shmId</a>;
<a name="l01276"></a>01276 
<a name="l01280"></a><a class="code" href="classslsDetector.html#07f3943ab8a65f061bbe1c1e1d22b700">01280</a>   <a class="code" href="classMySocketTCP.html">MySocketTCP</a> *<a class="code" href="classslsDetector.html#07f3943ab8a65f061bbe1c1e1d22b700">controlSocket</a>;
<a name="l01281"></a>01281 
<a name="l01285"></a><a class="code" href="classslsDetector.html#efee578cdd732339788a38707e5ce531">01285</a>   <a class="code" href="classMySocketTCP.html">MySocketTCP</a> *<a class="code" href="classslsDetector.html#efee578cdd732339788a38707e5ce531">stopSocket</a>;
<a name="l01286"></a>01286   
<a name="l01290"></a><a class="code" href="classslsDetector.html#1629e3c46678ae201f6797e4d827cb32">01290</a>   <a class="code" href="classMySocketTCP.html">MySocketTCP</a> *<a class="code" href="classslsDetector.html#1629e3c46678ae201f6797e4d827cb32">dataSocket</a>; 
<a name="l01291"></a>01291   
<a name="l01295"></a><a class="code" href="classslsDetector.html#52e9fe9baf37db001cdf58f982ab5dd6">01295</a>   queue&lt;int*&gt; <a class="code" href="classslsDetector.html#52e9fe9baf37db001cdf58f982ab5dd6">dataQueue</a>;
<a name="l01299"></a><a class="code" href="classslsDetector.html#4ac6f49427b58349fe54fbaa4e16fa9c">01299</a>   queue&lt;detectorData*&gt; <a class="code" href="classslsDetector.html#4ac6f49427b58349fe54fbaa4e16fa9c">finalDataQueue</a>;
<a name="l01300"></a>01300   
<a name="l01301"></a>01301   
<a name="l01302"></a>01302 
<a name="l01303"></a>01303 
<a name="l01307"></a><a class="code" href="classslsDetector.html#9f64e866250e916299048c9816c9ef28">01307</a>   <span class="keywordtype">float</span> <a class="code" href="classslsDetector.html#9f64e866250e916299048c9816c9ef28">currentPosition</a>;
<a name="l01308"></a>01308   
<a name="l01312"></a><a class="code" href="classslsDetector.html#9a6cd8787f618c147faacc1f3602bcf5">01312</a>   <span class="keywordtype">float</span> <a class="code" href="classslsDetector.html#9a6cd8787f618c147faacc1f3602bcf5">currentPositionIndex</a>;
<a name="l01313"></a>01313   
<a name="l01317"></a><a class="code" href="classslsDetector.html#4bba77b0de9f911c87d48d12c15a632b">01317</a>   <span class="keywordtype">float</span> <a class="code" href="classslsDetector.html#4bba77b0de9f911c87d48d12c15a632b">currentI0</a>;
<a name="l01318"></a>01318   
<a name="l01319"></a>01319 
<a name="l01320"></a>01320 
<a name="l01322"></a><a class="code" href="classslsDetector.html#81751fd6e87f9659a8b6afe13efec2cf">01322</a>   <span class="keywordtype">float</span> *<a class="code" href="classslsDetector.html#81751fd6e87f9659a8b6afe13efec2cf">mergingBins</a>;
<a name="l01323"></a>01323 
<a name="l01325"></a><a class="code" href="classslsDetector.html#fc173dcaeda2bbd7bbd6a874b5b5726c">01325</a>   <span class="keywordtype">float</span> *<a class="code" href="classslsDetector.html#fc173dcaeda2bbd7bbd6a874b5b5726c">mergingCounts</a>;
<a name="l01326"></a>01326 
<a name="l01328"></a><a class="code" href="classslsDetector.html#f357d3b5961ead7ec263a47aa51c4c11">01328</a>   <span class="keywordtype">float</span> *<a class="code" href="classslsDetector.html#f357d3b5961ead7ec263a47aa51c4c11">mergingErrors</a>;
<a name="l01329"></a>01329 
<a name="l01331"></a><a class="code" href="classslsDetector.html#91c5e22042997d86c2c4d16ef1be9150">01331</a>   <span class="keywordtype">int</span> *<a class="code" href="classslsDetector.html#91c5e22042997d86c2c4d16ef1be9150">mergingMultiplicity</a>;
<a name="l01332"></a>01332   
<a name="l01333"></a>01333 
<a name="l01334"></a>01334 
<a name="l01335"></a>01335 
<a name="l01336"></a>01336 
<a name="l01337"></a>01337 
<a name="l01338"></a>01338  
<a name="l01340"></a><a class="code" href="classslsDetector.html#a3c6e93198a2f8b072b7b84ba9af7c4b">01340</a>   <span class="keywordtype">float</span> *<a class="code" href="classslsDetector.html#a3c6e93198a2f8b072b7b84ba9af7c4b">ffcoefficients</a>;
<a name="l01342"></a><a class="code" href="classslsDetector.html#636168b92509e96418c9134d6d82ad4c">01342</a>   <span class="keywordtype">float</span> *<a class="code" href="classslsDetector.html#636168b92509e96418c9134d6d82ad4c">fferrors</a>;
<a name="l01344"></a><a class="code" href="classslsDetector.html#b78d6f2abc185b2bde2c550b31e0ff72">01344</a>   <a class="code" href="structsls__detector__module.html">sls_detector_module</a> *<a class="code" href="classslsDetector.html#b78d6f2abc185b2bde2c550b31e0ff72">detectorModules</a>;
<a name="l01346"></a><a class="code" href="classslsDetector.html#dc1b3f867b97136fca83f86c83b7ae14">01346</a>   <span class="keywordtype">float</span> *<a class="code" href="classslsDetector.html#dc1b3f867b97136fca83f86c83b7ae14">dacs</a>;
<a name="l01348"></a><a class="code" href="classslsDetector.html#f370b8466441491d8496bb8130b8c5e7">01348</a>   <span class="keywordtype">float</span> *<a class="code" href="classslsDetector.html#f370b8466441491d8496bb8130b8c5e7">adcs</a>;
<a name="l01350"></a><a class="code" href="classslsDetector.html#0eb24981d044632eccba507bd15871a6">01350</a>   <span class="keywordtype">int</span> *<a class="code" href="classslsDetector.html#0eb24981d044632eccba507bd15871a6">chipregs</a>;
<a name="l01352"></a><a class="code" href="classslsDetector.html#44335474559f7321f0309fbda304caf8">01352</a>   <span class="keywordtype">int</span> *<a class="code" href="classslsDetector.html#44335474559f7321f0309fbda304caf8">chanregs</a>;
<a name="l01354"></a><a class="code" href="classslsDetector.html#614c98f77a8a3ec6cff57aa59e671123">01354</a>   <span class="keywordtype">int</span> *<a class="code" href="classslsDetector.html#614c98f77a8a3ec6cff57aa59e671123">badChannelMask</a>;
<a name="l01355"></a>01355 
<a name="l01361"></a>01361   <span class="keywordtype">int</span>* <a class="code" href="classslsDetector.html#b1982e89f8e8de63c807a707ccba594c">getDataFromDetector</a>();
<a name="l01362"></a>01362 
<a name="l01368"></a>01368   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#cb94b9bfa7bbea2d9e1b0289a272bca8">initSharedMemory</a>(<a class="code" href="sls__detector__defs_8h.html#ab9f984f7b6798e684c8f3e6b63c6301">detectorType</a> type=<a class="code" href="sls__detector__defs_8h.html#ab9f984f7b6798e684c8f3e6b63c63019e022e6380da28dd73210ed34b137c36">GENERIC</a>, <span class="keywordtype">int</span> <span class="keywordtype">id</span>=0);
<a name="l01369"></a>01369 
<a name="l01371"></a>01371   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#5de7fb0d82ae2bcc406385373e665c6f">freeSharedMemory</a>();
<a name="l01377"></a>01377   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#19f1c6d120293c98a0d2dc992e5616f8">initializeDetectorSize</a>(<a class="code" href="sls__detector__defs_8h.html#ab9f984f7b6798e684c8f3e6b63c6301">detectorType</a> type);
<a name="l01381"></a>01381   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#1c39e47efe5d8794b68cb32295cddf3c">initializeDetectorStructure</a>(); 
<a name="l01385"></a>01385   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#5cd249f9a287b25af9a3a7e7e675c559">sendChannel</a>(<a class="code" href="structsls__detector__channel.html">sls_detector_channel</a>*); 
<a name="l01389"></a>01389   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#1e92a814b83501cdef5771c1e5c477aa">sendChip</a>(<a class="code" href="structsls__detector__chip.html">sls_detector_chip</a>*);
<a name="l01393"></a>01393   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#cc29561aa2b22ee49038c7bdf2be5ad7">sendModule</a>(<a class="code" href="structsls__detector__module.html">sls_detector_module</a>*);
<a name="l01397"></a>01397   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#39f8959a55e92c7b0817529270be7667">receiveChannel</a>(<a class="code" href="structsls__detector__channel.html">sls_detector_channel</a>*);
<a name="l01401"></a>01401   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#21d070352bfbf4745543c572bd6ae8f7">receiveChip</a>(<a class="code" href="structsls__detector__chip.html">sls_detector_chip</a>*);
<a name="l01405"></a>01405   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#1356b4fabe6b1aaa9c67939ff9331f98">receiveModule</a>(<a class="code" href="structsls__detector__module.html">sls_detector_module</a>*);
<a name="l01406"></a>01406   
<a name="l01410"></a>01410   <span class="keywordtype">void</span> <a class="code" href="classslsDetector.html#58199d3393aa7eaa606cbb7cbf83469d">startThread</a>();
<a name="l01411"></a>01411   
<a name="l01415"></a>01415   <span class="keywordtype">int</span> <a class="code" href="classslsDetector.html#6a0ebe013e27c065b2f67158a27f64ac">fillBadChannelMask</a>();
<a name="l01416"></a>01416 };
<a name="l01417"></a>01417 
<a name="l01418"></a>01418 
<a name="l01419"></a>01419 <span class="comment">//static void* startProcessData(void *n);</span>
<a name="l01420"></a>01420 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Dec 1 15:31:44 2009 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
